<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>React入门最好的实例－TodoList | HuiLin的博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属 react 了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo首先react值得拍手称赞的是它所有的开发都基于组件（com">
<meta property="og:type" content="article">
<meta property="og:title" content="React入门最好的实例－TodoList">
<meta property="og:url" content="http://yoursite.com/2016/09/27/es6/index.html">
<meta property="og:site_name" content="HuiLin的博客">
<meta property="og:description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属 react 了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo首先react值得拍手称赞的是它所有的开发都基于组件（com">
<meta property="og:updated_time" content="2016-10-10T07:57:32.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="React入门最好的实例－TodoList">
<meta name="twitter:description" content="React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。

最近前端界闹的沸沸扬扬的技术当属 react 了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：react-todos， 为了提起兴趣，你可以先点这里去看react-todo首先react值得拍手称赞的是它所有的开发都基于组件（com">
  
    <link rel="alternative" href="/atom.xml" title="HuiLin的博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/img/favicon.ico">
  
  <script src="/style.js"></script>
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay" style="background-color:#C77E7E"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/img/1.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">HuiLin</a></h1>
		</hgroup>

		
		<p class="header-subtitle">这个人非常懒</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">主页</a></li>
	        
				<li><a href="/tags/随笔">随笔</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">所有文章</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">标签</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">友链</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">关于我</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/huilin-1995" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
		        
					<a class="rss" target="_blank" href="#" title="rss">rss</a>
		        
					<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">HuiLin</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/img/1.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">HuiLin</h1>
			</hgroup>
			
			<p class="header-subtitle">这个人非常懒</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/tags/随笔">随笔</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/huilin-1995" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        <article id="post-es6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      React入门最好的实例－TodoList
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>React 的核心思想是：封装组件，各个组件维护自己的状态和 UI，当状态变更，自动重新渲染整个组件。</p>
</blockquote>
<p>最近前端界闹的沸沸扬扬的技术当属 <code>react</code> 了，加上项目需要等等原因，自己也决定花些时间来好好认识下这个东西。然后学习的时候顺便花时间写了一个demo：<code>react-todos</code>， 为了提起兴趣，你可以先点这里去看react-todo<br>首先react值得拍手称赞的是它所有的开发都基于<code>组件（component）</code>，然后组件和组件之间通过props传递方法，每个组件都有一个<code>状态（state）</code>，当某个方法改变了这个状态值时，整个组件就会重绘，从而达到刷新。另外，说到重绘就要提到虚拟dom了，就是用js<code>模拟dom</code>结构，等整个组件的dom更新完毕，才渲染到页面，简单来说只更新了相比之前改变了的部分，而不是全部刷新，所以效率很高。<br>hexo是一款基于Node.js的静态博客框架,<a href="https://github.com/hexojs/hexo" target="_blank" rel="external">hexo github</a>链接,这篇教程是针对与Mac的，参考链接，由于原文讲到的hexo是以前的老版本，所以现在的版本配置的时候会有些改动。</p>
<a id="more"></a>
<h2 id="项目初始化"><a href="#项目初始化" class="headerlink" title="项目初始化"></a>项目初始化</h2><p>大家先新建一个项目文件夹，在里面建一个项目信息的文件<code>package.json</code>:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"name"</span>: <span class="string">"react-todos"</span>,</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">    <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">    <span class="attr">"scripts"</span>: &#123;</div><div class="line">        <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"author"</span>: <span class="string">""</span>,</div><div class="line">    <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">    <span class="attr">"dependencies"</span>: &#123;</div><div class="line">        <span class="attr">"react"</span>: <span class="string">"^0.13.3"</span>,</div><div class="line">        <span class="attr">"sass"</span>: <span class="string">"^0.5.0"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">        <span class="attr">"babel-core"</span>: <span class="string">"^5.5.8"</span>,</div><div class="line">        <span class="attr">"babel-loader"</span>: <span class="string">"^5.1.4"</span>,</div><div class="line">        <span class="attr">"css-loader"</span>: <span class="string">"^0.14.5"</span>,</div><div class="line">        <span class="attr">"file-loader"</span>: <span class="string">"^0.8.4"</span>,</div><div class="line">        <span class="attr">"jsx-loader"</span>: <span class="string">"^0.13.2"</span>,</div><div class="line">        <span class="attr">"node-libs-browser"</span>: <span class="string">"^0.5.2"</span>,</div><div class="line">        <span class="attr">"node-sass"</span>: <span class="string">"^3.2.0"</span>,</div><div class="line">        <span class="attr">"sass-loader"</span>: <span class="string">"^1.0.2"</span>,</div><div class="line">        <span class="attr">"style-loader"</span>: <span class="string">"^0.12.3"</span>,</div><div class="line">        <span class="attr">"url-loader"</span>: <span class="string">"^0.5.6"</span>,</div><div class="line">        <span class="attr">"webpack"</span>: <span class="string">"^1.9.11"</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>建好之后，运行命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install</div></pre></td></tr></table></figure></p>
<p>安装项目依赖的所有模块。安装好之后，另外还有一点，项目数据是存储在本地浏览器的，所以我找到一个小模块用来操作localStorage，它的原理就是，通过将数据格式化成JSON字符串进行存储，使用的时候就解析JSON字符串。他的代码点这里看localDb可以看到，你可以复制一份，放在node_modules的文件夹内。</p>
<h2 id="webpack配置"><a href="#webpack配置" class="headerlink" title="webpack配置"></a>webpack配置</h2><p>项目使用的技术方案是：<code>webpack＋react＋es6</code>。关于es6的文章，我之前简单的介绍过，可以点这里去看es6，关于webpack的学习，我这里不详述了，看以后有时间再出篇文章吧。在项目文件夹下新建一个<code>webpack.config.js</code>：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">entry</span>: [</div><div class="line">        <span class="string">"./src/entry.js"</span></div><div class="line">    ],</div><div class="line">    <span class="attr">output</span>: &#123;</div><div class="line">        <span class="attr">path</span>: <span class="string">'./out/'</span>,</div><div class="line">        <span class="attr">filename</span>: <span class="string">"bundle.js"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">externals</span>: &#123;</div><div class="line">        <span class="string">'react'</span>: <span class="string">'React'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">module</span>: &#123;</div><div class="line">        <span class="attr">loaders</span>: [</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.js$/</span>, <span class="attr">loader</span>: <span class="string">"jsx!babel"</span>, <span class="attr">include</span>: <span class="regexp">/src/</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">loader</span>: <span class="string">"style!css"</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.scss$/</span>, <span class="attr">loader</span>: <span class="string">"style!css!sass"</span>&#125;,</div><div class="line">            &#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg)$/</span>, <span class="attr">loader</span>: <span class="string">'url?limit=8192'</span>&#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>上面的文件可以看到：入口文件是在src文件夹里的entry.js，然后输出文件放在out文件夹的bundle.js里。externals属性是告诉webpack当遇到require(‘react’)的时候，不去处理并且默认为全局的React变量。这样子，我们就需要在index.html单独用src去加载js。最后看看配置的loaders：</p>
<blockquote>
<ul>
<li>因为我们js文件会使用jsx和es6的语法，所以使用<code>jsx-loader</code>和<code>babel-loader</code>来编译js文件。</li>
<li>scss文件使用<code>sass-loader</code>编译成css文件。</li>
<li>写的时候可以省略-loader，多个loader使用<code>!</code>连接。</li>
</ul>
</blockquote>
<h2 id="项目目录"><a href="#项目目录" class="headerlink" title="项目目录"></a>项目目录</h2><p>先来看一下项目的目录结构，最重要的就是src目录：</p>
<blockquote>
<ul>
<li><code>index.html</code>是项目的入口页面。</li>
<li><code>components</code>文件夹存放项目拆分出来的各个组件文件。</li>
<li><code>vendor</code>文件夹存放项目依赖的框架，这里只有react。</li>
</ul>
</blockquote>
<h2 id="index-html和entry-js"><a href="#index-html和entry-js" class="headerlink" title="index.html和entry.js"></a>index.html和entry.js</h2><p>先来看index.html：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">h1</span> <span class="attr">class</span>=<span class="string">"todo-title"</span>&gt;</span>React-Todos<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container todo-container"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./src/vendor/react.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./out/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<p>entry.js :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="built_in">require</span>(<span class="string">'./styles/main.scss'</span>);    <span class="comment">// 引入样式表</span></div><div class="line"><span class="built_in">require</span>(<span class="string">'./components/App'</span>);     <span class="comment">// 引入组件</span></div></pre></td></tr></table></figure>
<p>webpack会将入口文件进行合并和整理，最后输出一个bundle.js，所以所有的逻辑都在这个js文件中，因此在index.html中，只需要引入react框架和bundle.js就好了。</p>
<h2 id="分析组件"><a href="#分析组件" class="headerlink" title="分析组件"></a>分析组件</h2><p>这个todo的项目，我们可以分为三个部分：头部，中间部分，尾部。那我们就来逐一的分析一下这些组件：</p>
<h3 id="App"><a href="#App" class="headerlink" title="App"></a>App</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="meta">'use strict'</span>;</div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> LocalDb <span class="keyword">from</span> <span class="string">'localDb'</span>;</div><div class="line"><span class="keyword">import</span> TodoHeader <span class="keyword">from</span> <span class="string">'./TodoHeader.js'</span>;</div><div class="line"><span class="keyword">import</span> TodoMain <span class="keyword">from</span> <span class="string">'./TodoMain.js'</span>;</div><div class="line"><span class="keyword">import</span> TodoFooter <span class="keyword">from</span> <span class="string">'./TodoFooter.js'</span></div><div class="line"><span class="comment">//es6写法</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123; <span class="comment">//定义组件，继承父类</span></div><div class="line">    <span class="keyword">constructor</span>() &#123; <span class="comment">//定义App类的构造函数</span></div><div class="line">        <span class="keyword">super</span>(); <span class="comment">//调用父类的构造函数</span></div><div class="line">        <span class="keyword">this</span>.db = <span class="keyword">new</span> LocalDb(<span class="string">'ReactDemo'</span>);</div><div class="line">        <span class="keyword">this</span>.state = &#123; <span class="comment">//定义组件状态</span></div><div class="line">            todos: <span class="keyword">this</span>.db.get(<span class="string">'todos'</span>) || [],</div><div class="line">            <span class="attr">isAllChecked</span>: <span class="literal">false</span></div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 判断是否所有任务的状态都完成，同步底部的全选框</span></div><div class="line">    allChecked() &#123;</div><div class="line">        <span class="keyword">let</span> isAllChecked = <span class="literal">false</span>;</div><div class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.state.todos.every(<span class="function"><span class="params">todo</span> =&gt;</span> todo.isDone)) &#123;</div><div class="line">            isAllChecked = <span class="literal">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.setState(&#123;   <span class="comment">//改变状态，组件重绘</span></div><div class="line">            todos: <span class="keyword">this</span>.state.todos,</div><div class="line">            <span class="attr">isAllChecked</span>: isAllChecked</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 添加任务，是传递给Header组件的方法</span></div><div class="line">    addTodo(todoItem)&#123;</div><div class="line">        <span class="keyword">this</span>.state.todos.push(todoItem);  <span class="comment">//todo列表</span></div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">        <span class="keyword">this</span>.allChecked();</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 删除当前的任务，传递给TodoItem的方法</span></div><div class="line">    deleteTodo(index)&#123;</div><div class="line">        <span class="keyword">this</span>.state.todos.splice(index, <span class="number">1</span>);</div><div class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">todos</span>: <span class="keyword">this</span>.state.todos&#125;);  <span class="comment">//改变状态</span></div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 清除已完成的任务，传递给Footer组件的方法</span></div><div class="line">    clearDone()&#123;</div><div class="line">        <span class="keyword">let</span> todos = <span class="keyword">this</span>.state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> !todo.isDone);   <span class="comment">//过滤掉数组中todo.isDone为true的item。</span></div><div class="line">        <span class="keyword">this</span>.setState(&#123;</div><div class="line">            <span class="attr">todos</span>: todos,</div><div class="line">            <span class="attr">isAllChecked</span>: <span class="literal">false</span></div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 改变任务状态，传递给TodoItem和Footer组件的方法</span></div><div class="line">    changeTodoState(index, isDone, isChangeAll=<span class="literal">false</span>)&#123;   <span class="comment">//初始化isChangeAll为false</span></div><div class="line">        <span class="keyword">if</span>(isChangeAll)&#123;     <span class="comment">//全部操作</span></div><div class="line">            <span class="keyword">this</span>.setState(&#123;</div><div class="line">                <span class="attr">todos</span>: <span class="keyword">this</span>.state.todos.map(<span class="function">(<span class="params">todo</span>) =&gt;</span> &#123;</div><div class="line">                    todo.isDone = isDone;</div><div class="line">                    <span class="keyword">return</span> todo;</div><div class="line">                &#125;),</div><div class="line">                <span class="attr">isAllChecked</span>: isDone</div><div class="line">            &#125;);</div><div class="line">        &#125;<span class="keyword">else</span>&#123;   <span class="comment">//操作其中一个todo</span></div><div class="line">            <span class="keyword">this</span>.state.todos[index].isDone = isDone;</div><div class="line">            <span class="keyword">this</span>.allChecked();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">this</span>.db.set(<span class="string">'todos'</span>, <span class="keyword">this</span>.state.todos);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//组件渲染方法</span></div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> info = &#123;</div><div class="line">            <span class="attr">isAllChecked</span>: <span class="keyword">this</span>.state.isAllChecked,</div><div class="line">            <span class="attr">todoCount</span>: <span class="keyword">this</span>.state.todos.length || <span class="number">0</span>,</div><div class="line">            <span class="attr">todoDoneCount</span>: <span class="function">(<span class="params"><span class="keyword">this</span>.state.todos &amp;&amp; <span class="keyword">this</span>.state.todos.filter((todo</span>) =&gt;</span> todo.isDone)).length || <span class="number">0</span></div><div class="line">        &#125;;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            &lt;div className="todo-wrap"&gt;</div><div class="line">                &lt;TodoHeader addTodo=&#123;this.addTodo.bind(this)&#125; /&gt;</div><div class="line">                &lt;TodoMain todos=&#123;this.state.todos&#125; deleteTodo=&#123;this.deleteTodo.bind(this)&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; /&gt;</div><div class="line">                &lt;TodoFooter &#123;...info&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; clearDone=&#123;this.clearDone.bind(this)&#125; /&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        );</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">React.render(&lt;App/&gt;, document.getElementById('app'));</div></pre></td></tr></table></figure>
<p>我们知道React的主流思想就是，所有的state状态和方法都是由父组件控制，然后通过props传递给子组件，形成一个单方向的数据链路，保持各组件的状态一致。所以我们在这个父组件App上，看的东西稍微有点多。一点点来看：</p>
<blockquote>
<ul>
<li>它采用es6的语法来创建了一个<code>继承React.Components的App类</code>。</li>
<li>然后在构造函数里定义了自己的<code>状态state</code>。</li>
<li>然后定义了很多方法，后面通过<code>props传递给子组件</code>。</li>
<li>最后定义组件自己的渲染方法<code>render</code>。</li>
</ul>
</blockquote>
<h3 id="App状态"><a href="#App状态" class="headerlink" title="App状态"></a>App状态</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">this</span>.state = &#123; <span class="comment">//定义组件状态</span></div><div class="line">    todos: <span class="keyword">this</span>.db.get(<span class="string">'todos'</span>) || [],</div><div class="line">    <span class="attr">isAllChecked</span>: <span class="literal">false</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>在App组件的构造函数里，我们初始化了组件的state，分别有两个，一个是todos的列表，一个是所有的todos是否全选的状态。在渲染的时候，我们会把状态传递到子组件中，如果子组件的某一个方法让状态发生了改变，那么整个组件就会进行重绘。</p>
<h3 id="App的方法"><a href="#App的方法" class="headerlink" title="App的方法"></a>App的方法</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 判断是否所有任务的状态都完成，同步底部的全选框</span></div><div class="line">allChecked() &#123;&#125;</div><div class="line"><span class="comment">// 添加任务，是传递给Header组件的方法</span></div><div class="line">addTodo(todoItem) &#123;&#125;</div><div class="line"><span class="comment">// 删除当前的任务，传递给TodoItem的方法</span></div><div class="line">deleteTodo(index) &#123;&#125;</div><div class="line"><span class="comment">// 清除已完成的任务，传递给Footer组件的方法</span></div><div class="line">clearDone() &#123;&#125;</div><div class="line"><span class="comment">// 改变任务状态，传递给TodoItem和Footer组件的方法</span></div><div class="line">changeTodoState(index, isDone, isChangeAll=<span class="literal">false</span>) &#123;&#125;</div><div class="line"><span class="comment">//组件渲染方法</span></div><div class="line">render() &#123;</div><div class="line">    <span class="keyword">let</span> info = &#123;</div><div class="line">        <span class="attr">isAllChecked</span>: <span class="keyword">this</span>.state.isAllChecked,</div><div class="line">        <span class="attr">todoCount</span>: <span class="keyword">this</span>.state.todos.length || <span class="number">0</span>,</div><div class="line">        <span class="attr">todoDoneCount</span>: <span class="function">(<span class="params"><span class="keyword">this</span>.state.todos &amp;&amp; <span class="keyword">this</span>.state.todos.filter((todo</span>) =&gt;</span> todo.isDone)).length || <span class="number">0</span></div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">        &lt;div className="todo-wrap"&gt;</div><div class="line">            &lt;TodoHeader addTodo=&#123;this.addTodo.bind(this)&#125; /&gt;</div><div class="line">            &lt;TodoMain todos=&#123;this.state.todos&#125; deleteTodo=&#123;this.deleteTodo.bind(this)&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; /&gt;</div><div class="line">            &lt;TodoFooter &#123;...info&#125; changeTodoState=&#123;this.changeTodoState.bind(this)&#125; clearDone=&#123;this.clearDone.bind(this)&#125; /&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    );</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>从上面的渲染（render）方法可以看出，组件的结构分为三部分，就是上中下。上面的<code>TodoHeader</code>是用来输入任务的地方，中间的<code>TodoMain</code>是用来展示任务列表的, 下面的<code>TodoFooter</code>提供一些特殊的方法，比如全选、删除等。<br>另外，上面省去function创建函数的方法，是es6的一种语法，关于es6，我之前总结过一篇文章点这里去看es6。<br>App组件定义的方法，会在渲染的时候传递给子组件，比如TodoHeader组件：<br><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;TodoHeader addTodo=&#123;<span class="keyword">this</span>.addTodo.bind(<span class="keyword">this</span>)&#125; /&gt;</div></pre></td></tr></table></figure></p>
<p>说明：</p>
<blockquote>
<ul>
<li>通过props传递子组件需要的值和方法。</li>
<li>传递方法时一定要bind(this)，不然内部this会指向不正确。</li>
<li>子组件的标签使用的时候一定要使用<code>/</code>闭合起来。</li>
<li>ES6语法，spread操作符让代码简洁很多，如上述代码中的TodoFooter:</li>
</ul>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;TodoFooter &#123;...info&#125; /&gt;</div><div class="line"><span class="comment">//如果不使用spread操作符，就要这样写：</span></div><div class="line">&lt;TodoFooter isAllchecked=&#123;info.isAllChecked&#125; todoCount=&#123;info.todoCount&#125;     todoDoneCount=&#123;info.todoDoneCount&#125;&gt;</div></pre></td></tr></table></figure>
<h3 id="渲染App"><a href="#渲染App" class="headerlink" title="渲染App"></a>渲染App</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">React.render(<span class="xml"><span class="tag">&lt;<span class="name">App</span>/&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">'app'</span>));</div></pre></td></tr></table></figure>
<p>把上面的App组件的内容渲染到id为’app’的dom元素里。<br>然后我们再简单看一下分解出来的三个组件：<code>TodoHeader</code>, <code>TodoMain</code>, <code>TodoFooter</code>。</p>
<h3 id="TodoHeader组件"><a href="#TodoHeader组件" class="headerlink" title="TodoHeader组件"></a>TodoHeader组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoHeader</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">// 绑定键盘回车事件，添加新任务</span></div><div class="line">    handlerKeyUp(e) &#123;</div><div class="line">        <span class="keyword">if</span>(e.keyCode == <span class="number">13</span>) &#123;</div><div class="line">            <span class="keyword">let</span> value = e.target.value;</div><div class="line">            <span class="keyword">if</span>(!value) <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">            <span class="keyword">let</span> newTodoItem = &#123;</div><div class="line">                <span class="attr">text</span>: value,</div><div class="line">                <span class="attr">isDone</span>: <span class="literal">false</span></div><div class="line">            &#125;;</div><div class="line">            e.target.value = <span class="string">''</span>;</div><div class="line">            <span class="keyword">this</span>.props.addTodo(newTodoItem);   <span class="comment">//使用props调用App组件传过来的方法。</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-header"</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyUp</span>=<span class="string">&#123;this.handlerKeyUp.bind(this)&#125;</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入你的任务名称，按回车键确认"</span>/&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">export default TodoHeader;   //ES6语法，导出模块，上文提到的es6文章中有讲解</div></pre></td></tr></table></figure>
<p>TodoHeader组件的创建方法和App组件的创建方法一样，内部方法就少了很多了，这里就定义了一个监听键盘的方法，绑定到了输入框的keyUp事件上，敲击回车键的时候就会调用父组件传过来的<code>addTodo()方法</code>。</p>
<h3 id="TodoMain组件"><a href="#TodoMain组件" class="headerlink" title="TodoMain组件"></a>TodoMain组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoMain</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.props.todos.length == <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-empty"</span>&gt;</span>恭喜您，目前没有待办任务！<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></div><div class="line">            )</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">return</span> (</div><div class="line">                <span class="xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">className</span>=<span class="string">"todo-main"</span>&gt;</span></span></div><div class="line">                    &#123;</div><div class="line">                        this.props.todos.map((todo, index) =&gt; &#123;</div><div class="line">                            //&#123;...this.props&#125; 用来传递TodoMain的todos属性和delete、change方法。</div><div class="line">                            return <span class="tag">&lt;<span class="name">TodoItem</span> <span class="attr">text</span>=<span class="string">&#123;todo.text&#125;</span> <span class="attr">isDone</span>=<span class="string">&#123;todo.isDone&#125;</span> <span class="attr">index</span>=<span class="string">&#123;index&#125;</span> &#123;<span class="attr">...this.props</span>&#125;/&gt;</span></div><div class="line">                        &#125;)</div><div class="line">                    &#125;</div><div class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">            )</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TodoMain组件主要是为了把传递过来的todos列表遍历显示出来，而每一个list又是一个TodoItem组件。这里又用到了spread操作符<code>{...this.props}</code>，代码中也做了注释，可以洗洗品味一下。</p>
<h3 id="TodoItem组件"><a href="#TodoItem组件" class="headerlink" title="TodoItem组件"></a>TodoItem组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">//改变任务是否已完成的状态</span></div><div class="line">    handlerChange() &#123;</div><div class="line">        <span class="keyword">let</span> isDone = !<span class="keyword">this</span>.props.isDone;</div><div class="line">        <span class="keyword">this</span>.props.changeTodoState(<span class="keyword">this</span>.props.index, isDone);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 鼠标移入事件</span></div><div class="line">    handlerMouseOver() &#123;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>).style.background = <span class="string">'#eee'</span>;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>.refs.delButton).style.display = <span class="string">'inline-block'</span>;</div><div class="line">    &#125;</div><div class="line">    handlerMouseOut() &#123;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>).style.background = <span class="string">'#fff'</span>;</div><div class="line">        React.findDOMNode(<span class="keyword">this</span>.refs.delButton).style.display = <span class="string">'none'</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 删除当前任务</span></div><div class="line">    handlerDelete()&#123;</div><div class="line">        <span class="keyword">this</span>.props.deleteTodo(<span class="keyword">this</span>.props.index);</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">let</span> className = <span class="keyword">this</span>.props.isDone ? <span class="string">'task-done'</span> : <span class="string">''</span>;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">onMouseOver</span>=<span class="string">&#123;this.handlerMouseOver.bind(this)&#125;</span> <span class="attr">onMouseOut</span>=<span class="string">&#123;this.handlerMouseOut.bind(this)&#125;</span>&gt;</span></span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">&#123;this.props.isDone&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handlerChange.bind(this)&#125;</span> /&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&#123;className&#125;</span>&gt;</span>&#123;this.props.text&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">ref</span>=<span class="string">"delButton"</span> <span class="attr">className</span>=<span class="string">"btn btn-danger"</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handlerDelete.bind(this)&#125;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>TodoItem有这四个方法，我们主要看看新出现的几点：</p>
<blockquote>
<ul>
<li><code>React.findDOMNode(this)</code>可以获取当前这个组件标签。</li>
<li>在元素中定义<code>ref=xxx</code>属性，就可以通过<code>React.findDOMNode(this.refs.xxx)</code>获取到这个元素。</li>
<li>给元素定义class类名的时候要使用<code>className</code>。</li>
</ul>
</blockquote>
<h3 id="TodoFooter组件"><a href="#TodoFooter组件" class="headerlink" title="TodoFooter组件"></a>TodoFooter组件</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoFooter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">    <span class="comment">//改变任务是否已完成的状态</span></div><div class="line">    handlerSelectAll(e) &#123;</div><div class="line">        <span class="keyword">this</span>.props.changeTodoState(<span class="literal">null</span>, e.target.checked, <span class="literal">true</span>);    <span class="comment">// true表示全部操作。</span></div><div class="line">    &#125;</div><div class="line">    <span class="comment">//删除全部已完成的任务</span></div><div class="line">    handlerDeleteDone() &#123;</div><div class="line">        <span class="keyword">this</span>.props.clearDone();</div><div class="line">    &#125;</div><div class="line">    render() &#123;</div><div class="line">        <span class="keyword">return</span> (</div><div class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"todo-footer"</span>&gt;</span></span></div><div class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">&#123;this.props.isAllChecked&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;this.handlerSelectAll.bind(this)&#125;</span> /&gt;</span>全选</div><div class="line">            <span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">"text-success"</span>&gt;</span>已完成&#123;this.props.todoDoneCount&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> / 全部&#123;this.props.todoCount&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">"btn btn-danger"</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handlerDeleteDone.bind(this)&#125;</span>&gt;</span>清除已完成任务<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        )</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>todoFooter组件主要用来批量更改状态和清除已完成的任务，还要显示任务完成情况，所以代码很简单了。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p><code>webpack 命令行的几种基本命令:</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ webpack // 最基本的启动webpack方法</div><div class="line">$ webpack -w // 提供watch方法，实时进行打包更新</div><div class="line">$ webpack -p // 对打包后的文件进行压缩，提供production</div><div class="line">$ webpack -p -w // 对打包后的文件进行压缩，并且实时监听</div><div class="line">$ webpack <span class="_">-d</span> // 提供<span class="built_in">source</span> map，方便调试。</div></pre></td></tr></table></figure></p>
<p>回过头来再看看这个demo的实现过程，react组件化的思想让我们编写代码的时候思维清晰，便于阅读。我们通过父组件来控制状态，并通过props传递，来保证组件内的状态一致，并且我们可以清晰的看到某一个方法该由谁来维护。这是一种全新的前端编码体验，相信以后会成为主流。</p>
<p>另外，我们看到代码中，html直接嵌到js中了，这就是React提出的一种叫JSX的语法。其实入门react本身还是很简单，只是很多人看到JSX和ES6的语法，就打了退堂鼓了，因为我们被代码分离”洗脑”太久了。其实，它们就好像是一堵墙，要是我们畏惧这个障碍止步不前，那么只能停留在原地，如果我们骨气勇气爬上去，才发现react的风景真的很优美！</p>
<h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><blockquote>
<ul>
<li><a href="http://www.reqianduan.com/2297.html" target="_blank" rel="external">http://www.reqianduan.com/2297.html</a></li>
<li><a href="http://wiki.jikexueyuan.com/project/react-tutorial/" target="_blank" rel="external">http://wiki.jikexueyuan.com/project/react-tutorial/</a></li>
<li><a href="http://gank.io/post/564151c1f1df1210001c9161" target="_blank" rel="external">http://gank.io/post/564151c1f1df1210001c9161</a></li>
</ul>
</blockquote>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2016/09/27/es6/" class="archive-article-date">
  	<time datetime="2016-09-27T08:39:28.000Z" itemprop="datePublished"><i class="icon-clock"></i>2016-09-27</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ES6/">ES6</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webpack/">webpack</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>

  
<nav id="article-nav">
  
    <a href="/2016/10/09/hexo/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="icon-circle-left"></i>
      <div class="article-nav-title">
        
          搭建博客hexo
        
      </div>
    </a>
  
  
    <a href="/2016/09/27/reward/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">如何为博客增加打赏功能</div>
      <i class="icon-circle-right"></i>
    </a>
  
</nav>




<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
	    <a class="jiathis_button_twitter"></a>
	    <a class="jiathis_button_plus"></a> 
	    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="//v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 HuiLin
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: true,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">全部</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">标签</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">友链</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">我</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/ES6/" style="font-size: 10px;">ES6</a> <a href="/tags/es6/" style="font-size: 10px;">es6</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/webpack/" style="font-size: 10px;">webpack</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接1</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接2</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接3</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接4</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接5</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://localhost:4000/">友情链接6</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">懒猪一枚&lt;br&gt;&lt;br&gt;WELCOME</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>